#!/bin/bash
# Laravel Artisan Serve Wrapper
# This bypasses the broken console kernel and directly starts the PHP server

echo "Laravel development server starting..."

# Find an available port
PORTS=(8000 8001 8002 8003 8004)
PORT=""

for p in "${PORTS[@]}"; do
    if ! lsof -Pi :$p -sTCP:LISTEN -t >/dev/null 2>&1; then
        PORT=$p
        break
    fi
done

if [ -z "$PORT" ]; then
    echo "Error: No available ports found"
    exit 1
fi

echo "Laravel development server started: http://127.0.0.1:$PORT"
echo "Press Ctrl+C to stop the server"

# Start the PHP built-in server
php -S 127.0.0.1:$PORT -t public
